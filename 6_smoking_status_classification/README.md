# 흡연 여부 분류 모델링

## 1. 사전 세팅

---

## 2. 문제 정의

- 건강검진의 흡연 여부는 **자가보고(self-report)** 방식이어서 응답 오류가 발생할 수 있다.
- **건강검진 수치만으로 흡연 여부를 예측**하고,
- 어떤 생체 지표가 흡연자의 특징으로 작용하는지 확인한다.

---

## 3. 데이터 간단 확인

| Column    | Description             |
| :-------- | :---------------------- |
| 나이        | 피검자 연령                  |
| BMI       | 체질량지수                   |
| 공복 혈당     | 8시간 공복 후 혈당 (mg/dL)     |
| 혈압        | 수축기·이완기 혈압 종합           |
| 중성 지방     | Triglyceride 농도 (mg/dL) |
| HDL / LDL | 좋은·나쁜 콜레스테롤 수치          |
| 헤모글로빈     | 산소 운반 능력 관련 혈액 지표       |
| 간 효소율     | AST/ALT 비율 기반 간 기능      |
| label     | 흡연 여부 (1: 흡연자, 0: 비흡연자) |

* 결측치 없음, 불필요한 `ID` 컬럼 제거
* 학습용 16개 Feature 사용 (총 7,000행 × 16열)

---

## 4. 문제 해결 프로세스 정의

* **문제:** 자가보고 오류를 줄이기 위해 건강검진 수치만으로 흡연 여부 예측
* **기대 효과:** 응답 신뢰성 검증 및 흡연 관련 질환 조기 탐지 보조
* **해결 방안:** Binary Classification(Logistic, KNN, LDA, SVM, RandomForest)
* **성과 측정:** Accuracy, Recall, F1, ROC-AUC → 특히 **흡연자(FN) 최소화** 중심
* **현업 적용:** 건강검진 시스템 내 **자가보고 검증용 보조 모델**로 활용 가능

---

## 5. 데이터 확인 및 이상치 처리

* 수치형 변수의 이상치 비율 확인 (IQR 기준)
* `vision` 변수의 극단값(>=5.0)을 **연령대별 중앙값으로 대체**
* `tooth_decay`, `urine_protein`을 범주형 변수로 변환

---

## 6. 데이터 분리 및 스케일링

* 타겟: `smoking_label` (1/0)
* 학습·평가 데이터 분리
* **RobustScaler** 사용 → 이상치 민감도 완화

---

## 7. 모델링 및 평가

| Model               |  ROC-AUC  | 주요 특징                  |
| :------------------ | :-------: | :--------------------- |
| Logistic Regression |    0.81   | 단순 회귀 기반, 규제 적용(L1+L2) |
| KNN                 |    0.79   | 거리 기반, k=11일 때 최적      |
| LDA                 |    0.79   | 선형 판별축 기반 분류, 빠른 계산    |
| SVM (RBF)           | **0.80+** | 비선형 경계, Recall 중심 분류   |

---

## 8. 결론

* 건강검진 수치만으로도 일정 수준의 흡연 예측이 가능함(ROC-AUC ≈ 0.8)
* **혈당, 간 효소율, 헤모글로빈** 등이 흡연자의 주요 지표로 나타남
* **RobustScaler**로 극단값을 완화한 전처리가 효과적
* 향후 실제 설문 데이터와 결합 시 **응답 신뢰도 검증 모델**로 확장 가능